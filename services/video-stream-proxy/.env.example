# ==========================================
# VIDEO STREAM PROXY - ENVIRONMENT VARIABLES
# ==========================================
# WebSocket proxy for robot video streams
# Relays video streams from robots to frontend clients

# ==========================================
# NODE ENVIRONMENT
# ==========================================
NODE_ENV=development

# ==========================================
# SERVER CONFIGURATION
# ==========================================
# Port for the video stream proxy server
PORT=8889

# Host binding (use 0.0.0.0 for Docker, localhost for local dev)
HOST=0.0.0.0

# ==========================================
# WEBSOCKET CONFIGURATION
# ==========================================
# WebSocket server path
WS_PATH=/ws

# WebSocket ping interval (in milliseconds)
WS_PING_INTERVAL=30000

# WebSocket connection timeout (in milliseconds)
WS_CONNECTION_TIMEOUT=60000

# Maximum WebSocket message size (in bytes)
WS_MAX_MESSAGE_SIZE=10485760

# ==========================================
# CORS CONFIGURATION
# ==========================================
# Allowed origins for CORS (comma-separated)
# Development: http://localhost:3000,http://127.0.0.1:3000
# Production: https://your-domain.com,https://www.your-domain.com
CORS_ORIGIN=http://localhost:3000,http://127.0.0.1:3000

# Enable credentials in CORS
CORS_CREDENTIALS=true

# ==========================================
# VIDEO STREAM CONFIGURATION
# ==========================================
# Maximum concurrent streams
MAX_CONCURRENT_STREAMS=50

# Stream buffer size (in bytes)
STREAM_BUFFER_SIZE=1048576

# Video encoding format (h264, vp8, vp9)
VIDEO_ENCODING=h264

# Video quality (low, medium, high)
VIDEO_QUALITY=medium

# Frame rate limit (fps)
MAX_FRAME_RATE=30

# ==========================================
# ROBOT CONNECTION CONFIGURATION
# ==========================================
# Robot stream endpoint pattern
# Example: ws://robot-{id}.local:8080/stream
ROBOT_STREAM_ENDPOINT_PATTERN=ws://robot-{id}.local:8080/stream

# Robot connection timeout (in milliseconds)
ROBOT_CONNECTION_TIMEOUT=10000

# Robot reconnection attempts
ROBOT_MAX_RECONNECT_ATTEMPTS=3

# Robot reconnection delay (in milliseconds)
ROBOT_RECONNECT_DELAY=5000

# ==========================================
# AUTHENTICATION (Optional)
# ==========================================
# Enable authentication for video streams
ENABLE_AUTH=false

# JWT secret for token verification (must match other services)
# JWT_SECRET=local-auth-jwt-secret

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Log format: json or pretty
LOG_FORMAT=pretty

# Enable stream event logging
LOG_STREAM_EVENTS=true

# ==========================================
# PERFORMANCE MONITORING
# ==========================================
# Enable performance metrics
ENABLE_METRICS=true

# Metrics endpoint path
METRICS_PATH=/metrics

# ==========================================
# ERROR TRACKING (Sentry)
# ==========================================
# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/your-project-id

# Sentry environment
# SENTRY_ENVIRONMENT=development

# ==========================================
# HEALTH CHECK CONFIGURATION
# ==========================================
# Health check endpoint path
HEALTH_CHECK_PATH=/health

# ==========================================
# RATE LIMITING
# ==========================================
# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Maximum connections per IP
MAX_CONNECTIONS_PER_IP=10

# ==========================================
# NOTES:
# ==========================================
# 1. This service acts as a WebSocket relay between robots and frontend clients
# 2. Ensure proper network configuration for robot connectivity
# 3. Use SSL/TLS in production (wss:// instead of ws://)
# 4. Monitor bandwidth usage and connection limits
# 5. Configure firewall rules to allow WebSocket connections
