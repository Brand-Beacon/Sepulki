# Sepulki Environment Variables - Example Configuration

# =============================================================================
# GLOBAL CONFIGURATION
# =============================================================================

# Environment (development | production | test)
NODE_ENV=development

# =============================================================================
# HAMMER ORCHESTRATOR (GraphQL API) - Port 4000
# =============================================================================

# Database
DATABASE_URL=postgresql://smith:forge_dev@localhost:5432/sepulki

# Redis (for rate limiting and caching)
REDIS_URL=redis://localhost:6379

# Security - Allowed Origins (comma-separated)
# In development, includes localhost and 127.0.0.1
# In production, set to your actual domains
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Request Configuration
MAX_REQUEST_SIZE=100kb        # Maximum request body size
REQUEST_TIMEOUT=30000         # Request timeout in milliseconds (30 seconds)

# Telemetry
ENABLE_TELEMETRY=true         # Enable/disable telemetry generation

# Rate Limiting (optional, defaults shown)
# Set SKIP_RATE_LIMIT=true in development to disable rate limiting
SKIP_RATE_LIMIT=false

# =============================================================================
# LOCAL AUTH SERVICE - Port 4446
# =============================================================================

# Database (same as main app)
DATABASE_URL=postgresql://smith:forge_dev@localhost:5432/sepulki

# Redis (for sessions)
REDIS_URL=redis://localhost:6379

# JWT Configuration
JWT_SECRET=local-auth-jwt-secret-change-in-production

# CSRF Protection
CSRF_SECRET=super-secret-csrf-key-change-in-production

# Security
# In production, generate secure secrets:
# openssl rand -base64 32

# =============================================================================
# FORGE UI (Next.js Frontend) - Port 3000
# =============================================================================

# GraphQL API Endpoint
NEXT_PUBLIC_GRAPHQL_URL=http://localhost:4000/graphql

# Authentication Service
NEXTAUTH_URL=http://localhost:4446
NEXTAUTH_SECRET=your-nextauth-secret-here

# =============================================================================
# PRODUCTION-ONLY SETTINGS
# =============================================================================

# When deploying to production, ensure you:
# 1. Change NODE_ENV to 'production'
# 2. Generate secure secrets for JWT_SECRET and CSRF_SECRET
# 3. Set ALLOWED_ORIGINS to your actual production domains
# 4. Configure Redis with authentication
# 5. Enable HTTPS/TLS for all services
# 6. Set up proper database SSL connections

# Example production configuration:
# NODE_ENV=production
# ALLOWED_ORIGINS=https://sepulki.com,https://www.sepulki.com
# JWT_SECRET=<generated-with-openssl-rand-base64-32>
# CSRF_SECRET=<generated-with-openssl-rand-base64-32>
# REDIS_URL=rediss://user:password@redis-host:6380
# DATABASE_URL=postgresql://user:password@db-host:5432/sepulki?sslmode=require

# =============================================================================
# OPTIONAL SERVICES
# =============================================================================

# Anvil Sim (Robot Simulator) - Port varies
# VIDEO_STREAM_PROXY - Port varies

# =============================================================================
# DEVELOPMENT HELPERS
# =============================================================================

# Enable detailed logging in development
DEBUG=*

# Skip rate limiting in development (not recommended)
# SKIP_RATE_LIMIT=true

# =============================================================================
# SECURITY NOTES
# =============================================================================

# ⚠️  NEVER commit this file with real secrets to version control
# ⚠️  Use .env.local for local development (gitignored)
# ⚠️  Use secrets management in production (AWS Secrets Manager, etc.)
# ⚠️  Rotate secrets regularly
# ⚠️  Use strong, unique secrets for each environment

# Generate secure secrets:
# openssl rand -base64 32
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
