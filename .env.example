# ==========================================
# SEPULKI PLATFORM - DOCKER COMPOSE ENVIRONMENT
# ==========================================
# Environment variables for docker-compose.yml services
# Copy this file to .env for local development
#
# Usage:
#   cp .env.example .env
#   docker-compose up -d

# ==========================================
# POSTGRESQL DATABASE
# ==========================================
# PostgreSQL database configuration
POSTGRES_DB=sepulki
POSTGRES_USER=smith
POSTGRES_PASSWORD=forge_dev

# PostgreSQL port mapping (host:container)
POSTGRES_PORT=5432

# PostgreSQL data volume
# POSTGRES_DATA_VOLUME=postgres_data

# ==========================================
# REDIS CACHE & SESSIONS
# ==========================================
# Redis port mapping (host:container)
REDIS_PORT=6379

# Redis data volume
# REDIS_DATA_VOLUME=redis_data

# Redis password (optional, recommended for production)
# REDIS_PASSWORD=your-redis-password

# ==========================================
# MINIO (S3-Compatible Storage)
# ==========================================
# MinIO root credentials
MINIO_ROOT_USER=sepulki
MINIO_ROOT_PASSWORD=vault_dev_key

# MinIO port mappings
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# MinIO data volume
# MINIO_DATA_VOLUME=minio_data

# Default bucket name
MINIO_DEFAULT_BUCKET=sepulki-files

# MinIO region (for S3 compatibility)
# MINIO_REGION=us-east-1

# ==========================================
# INFLUXDB (Time-Series Database)
# ==========================================
# InfluxDB setup mode (setup for first run)
DOCKER_INFLUXDB_INIT_MODE=setup

# InfluxDB admin credentials
INFLUXDB_USERNAME=smith
INFLUXDB_PASSWORD=bellows_dev

# InfluxDB organization and bucket
INFLUXDB_ORG=sepulki
INFLUXDB_BUCKET=bellows

# InfluxDB admin token (auto-generated if not set)
# DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=your-influxdb-admin-token

# InfluxDB port mapping
INFLUXDB_PORT=8086

# InfluxDB data volume
# INFLUXDB_DATA_VOLUME=influxdb_data

# ==========================================
# LOCAL OAUTH PROVIDER (Hydra)
# ==========================================
# Hydra OAuth2/OIDC provider for local development
LOCAL_OAUTH_ISSUER=http://localhost:4444
LOCAL_OAUTH_PUBLIC_PORT=4444
LOCAL_OAUTH_ADMIN_PORT=4445

# Hydra consent/login UI
LOCAL_OAUTH_CONSENT_URL=http://localhost:3001/consent
LOCAL_OAUTH_LOGIN_URL=http://localhost:3001/login

# Hydra database connection (uses PostgreSQL)
HYDRA_DSN=postgres://smith:forge_dev@postgres:5432/hydra?sslmode=disable

# ==========================================
# MAILHOG (Local Email Testing)
# ==========================================
# MailHog SMTP port (for sending emails)
MAILHOG_SMTP_PORT=1025

# MailHog web UI port
MAILHOG_WEB_PORT=8025

# ==========================================
# MOCK SMS SERVICE (MockServer)
# ==========================================
# MockServer port for SMS testing
MOCK_SMS_PORT=1080

# MockServer dashboard port
MOCK_SMS_DASHBOARD_PORT=1081

# ==========================================
# HAMMER ORCHESTRATOR SERVICE
# ==========================================
# GraphQL API port
HAMMER_ORCHESTRATOR_PORT=4000

# Service environment
HAMMER_ORCHESTRATOR_NODE_ENV=development

# Database connection (uses PostgreSQL container)
HAMMER_ORCHESTRATOR_DATABASE_URL=postgresql://smith:forge_dev@postgres:5432/sepulki

# Redis connection (uses Redis container)
HAMMER_ORCHESTRATOR_REDIS_URL=redis://redis:6379

# Enable GraphQL Playground
HAMMER_ORCHESTRATOR_GRAPHQL_PLAYGROUND=true

# Enable telemetry generation
HAMMER_ORCHESTRATOR_ENABLE_TELEMETRY=true

# ==========================================
# LOCAL AUTH SERVICE
# ==========================================
# Local authentication service port
LOCAL_AUTH_PORT=4446

# Service environment
LOCAL_AUTH_NODE_ENV=development

# Database connection (uses PostgreSQL container)
LOCAL_AUTH_DATABASE_URL=postgresql://smith:forge_dev@postgres:5432/sepulki

# Redis connection (uses Redis container)
LOCAL_AUTH_REDIS_URL=redis://redis:6379

# JWT secret (must match hammer-orchestrator)
LOCAL_AUTH_JWT_SECRET=local-auth-jwt-secret

# CORS origin (frontend URL)
LOCAL_AUTH_CORS_ORIGIN=http://localhost:3000

# ==========================================
# FORGE UI (Frontend)
# ==========================================
# Frontend port (if running via Docker)
FORGE_UI_PORT=3000

# Frontend environment
FORGE_UI_NODE_ENV=development

# GraphQL endpoint
FORGE_UI_GRAPHQL_URL=http://localhost:4000/graphql

# NextAuth URL
FORGE_UI_NEXTAUTH_URL=http://localhost:3000

# NextAuth secret
FORGE_UI_NEXTAUTH_SECRET=dev-secret-change-in-production

# ==========================================
# VIDEO STREAM PROXY
# ==========================================
# Video proxy port
VIDEO_PROXY_PORT=8889

# ==========================================
# NETWORK CONFIGURATION
# ==========================================
# Docker network name
DOCKER_NETWORK_NAME=sepulki_network

# Network driver
# DOCKER_NETWORK_DRIVER=bridge

# ==========================================
# DOCKER COMPOSE CONFIGURATION
# ==========================================
# Compose project name
COMPOSE_PROJECT_NAME=sepulki

# Docker Compose file (override if using custom compose file)
# COMPOSE_FILE=docker-compose.yml

# ==========================================
# DEVELOPMENT vs PRODUCTION
# ==========================================
# Set to 'production' for production deployment
ENVIRONMENT=development

# Enable development features
DEV_MODE=true

# Enable hot reload (for services)
HOT_RELOAD=true

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
# Log level for all services
LOG_LEVEL=info

# Log format (json or pretty)
LOG_FORMAT=pretty

# ==========================================
# RESOURCE LIMITS (Optional)
# ==========================================
# PostgreSQL memory limit
# POSTGRES_MEMORY_LIMIT=1G

# Redis memory limit
# REDIS_MEMORY_LIMIT=512M

# MinIO memory limit
# MINIO_MEMORY_LIMIT=1G

# Service memory limits
# HAMMER_MEMORY_LIMIT=512M
# LOCAL_AUTH_MEMORY_LIMIT=256M

# ==========================================
# BACKUP CONFIGURATION (Optional)
# ==========================================
# Enable automatic backups
# ENABLE_BACKUPS=false

# Backup schedule (cron format)
# BACKUP_SCHEDULE="0 2 * * *"

# Backup retention (days)
# BACKUP_RETENTION_DAYS=7

# Backup location
# BACKUP_PATH=./backups

# ==========================================
# HEALTHCHECK CONFIGURATION
# ==========================================
# Healthcheck interval (seconds)
HEALTHCHECK_INTERVAL=30

# Healthcheck timeout (seconds)
HEALTHCHECK_TIMEOUT=10

# Healthcheck retries before marking unhealthy
HEALTHCHECK_RETRIES=3

# ==========================================
# EXTERNAL SERVICE INTEGRATION (Optional)
# ==========================================
# Isaac Sim endpoint (if external)
# ISAAC_SIM_ENDPOINT=http://18.234.83.45:8211

# External MinIO/S3 (if not using local MinIO)
# EXTERNAL_S3_ENDPOINT=https://s3.amazonaws.com
# EXTERNAL_S3_BUCKET=sepulki-files
# EXTERNAL_S3_ACCESS_KEY=your-access-key
# EXTERNAL_S3_SECRET_KEY=your-secret-key

# ==========================================
# NOTES
# ==========================================
# 1. This file contains default development values
# 2. Copy to .env and customize for your environment
# 3. Never commit .env file to version control
# 4. For production, use managed services instead of Docker containers
# 5. Ensure all passwords are changed from defaults in production
# 6. Use docker-compose.override.yml for local customizations
# 7. Run `docker-compose config` to validate configuration
# 8. Use `docker-compose up -d` to start services in background
# 9. Access logs with `docker-compose logs -f [service-name]`
# 10. Stop services with `docker-compose down`

# ==========================================
# QUICK COMMANDS
# ==========================================
# Start all services:
#   docker-compose up -d
#
# Start specific service:
#   docker-compose up -d postgres redis
#
# View logs:
#   docker-compose logs -f
#   docker-compose logs -f hammer-orchestrator
#
# Stop all services:
#   docker-compose down
#
# Stop and remove volumes (⚠️  destroys data):
#   docker-compose down -v
#
# Restart service:
#   docker-compose restart hammer-orchestrator
#
# Check service status:
#   docker-compose ps
#
# Execute command in service:
#   docker-compose exec postgres psql -U smith -d sepulki
#   docker-compose exec redis redis-cli
#
# View service configuration:
#   docker-compose config
